<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tzcpa.mapper.treatment.TeamBalancedScorecardMapper" >
  <resultMap id="BaseResultMap" type="com.tzcpa.model.treatment.TeamBalancedScorecardDO" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="id" property="id" jdbcType="INTEGER" />
    <result column="angle" property="angle" jdbcType="VARCHAR" />
    <result column="option" property="option" jdbcType="INTEGER" />
    <result column="quesion_option" property="quesionOption" jdbcType="VARCHAR" />
    <result column="question_option_value" property="questionOptionValue" jdbcType="VARCHAR" />
    <result column="target_value" property="targetValue" jdbcType="VARCHAR" />
    <result column="standard_score" property="standardScore" jdbcType="INTEGER" />
    <result column="weight_coefficient" property="weightCoefficient" jdbcType="REAL" />
    <result column="actual_value" property="actualValue" jdbcType="VARCHAR" />
    <result column="final_score" property="finalScore" jdbcType="INTEGER" />
    <result column="score_standard" property="scoreStandard" jdbcType="VARCHAR" />
    <result column="question_id" property="questionId" jdbcType="INTEGER" />
    <result column="class_id" property="classId" jdbcType="INTEGER" />
    <result column="team_id" property="teamId" jdbcType="INTEGER" />
  </resultMap>
  <!-- 初始化团队平衡记分卡 -->
    <insert id="initTeamBalancedScorecard">
		INSERT INTO t_team_balanced_scorecard (
			angle,
		  `options`,
			`option`,
			standard_score,
			weight_coefficient,
			score_standard,
			question_id,
			infact_id,
			`order`,
			quesion_option_right,
			target_value_right,
			unit_right,
			weight_coefficient_right,
			balance_score_func_right,
			strategy,
			`year`,
			class_id,
			team_id
		) select
			t1.`angle`,
			t1.`options`,
			t1.`option`,
			t1.`standard_score`,
			t1.`weight_coefficient`,
			t1.`score_standard`,
			t1.question_id,
			t1.`infact_id`,
			t1.`order`,
			t1.`quesion_option_right`,
			t2.`target_value_right`,
			t1.`unit_right`,
			t1.`weight_coefficient_right`,
			t1.`balance_score_func_right`,
			t1.strategy,
			t2.`year`,
			t1.class_id,
			#{teamId}
			FROM
			`t_class_balanced_scorecard` t1 INNER JOIN t_class_balanced_scorecard_target_value t2
			on t1.class_id = t2.class_id
			and t1.foreign_id = t2.foreign_id
			where t1.class_id = #{classId}
    </insert>
</mapper>